<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>7.4. Enkódování pomocí kodeku Xvid</title><link rel="stylesheet" type="text/css" href="default.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="MPlayer - Multimediální přehrávač"><link rel="up" href="encoding-guide.html" title="Kapitola 7. Enkódování s MEncoderem"><link rel="prev" href="menc-feat-enc-libavcodec.html" title="7.3. Enkódování s rodinou kodeků libavcodec"><link rel="next" href="menc-feat-x264.html" title="7.5. Enkódování x264 kodekem"><link rel="preface" href="howtoread.html" title="Jak číst tuto dokumentaci"><link rel="chapter" href="intro.html" title="Kapitola 1. Představení"><link rel="chapter" href="install.html" title="Kapitola 2. Instalace"><link rel="chapter" href="usage.html" title="Kapitola 3. Použití"><link rel="chapter" href="video.html" title="Kapitola 4. Výstupní video zařízení/rozhraní"><link rel="chapter" href="ports.html" title="Kapitola 5. Porty"><link rel="chapter" href="mencoder.html" title="Kapitola 6. Základní použití MEncoderu"><link rel="chapter" href="encoding-guide.html" title="Kapitola 7. Enkódování s MEncoderem"><link rel="chapter" href="faq.html" title="Kapitola 8. Často Kladené Dotazy (FAQ)"><link rel="appendix" href="bugreports.html" title="Příloha A. Jak hlásit chyby"><link rel="appendix" href="skin.html" title="Příloha B. Formát skinů MPlayeru"><link rel="subsection" href="menc-feat-xvid.html#menc-feat-xvid-intro" title="7.4.1. Jaké volby by měly být použity, abychom dosáhli nejlepších výsledků?"><link rel="subsection" href="menc-feat-xvid.html#menc-feat-xvid-encoding-options" title="7.4.2. Volby pro enkódování s Xvid"><link rel="subsection" href="menc-feat-xvid.html#menc-feat-xvid-encoding-profiles" title="7.4.3. Enkódovací profily"><link rel="subsection" href="menc-feat-xvid.html#menc-feat-xvid-example-settings" title="7.4.4. Příklady nastavení enkódování"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7.4. Enkódování pomocí kodeku <code class="systemitem">Xvid</code>
</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="menc-feat-enc-libavcodec.html">Předcházející</a> </td><th width="60%" align="center">Kapitola 7. Enkódování s <span class="application">MEncoder</span>em</th><td width="20%" align="right"> <a accesskey="n" href="menc-feat-x264.html">Další</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-xvid"></a>7.4. Enkódování pomocí kodeku <code class="systemitem">Xvid</code>
</h2></div></div></div><p>
<code class="systemitem">Xvid</code> je svobodná knihovna pro
enkódování MPEG-4 ASP video datových proudů.
Před začátkem enkódování budete muset <a class="link" href="codec-installation.html#xvid" title="2.5.1. Xvid">
nastavit <span class="application">MEncoder</span> pro její podporu</a>.
</p><p>
Tato příručka se zaměřuje na poskytování stejného druhu informací
jako příručka enkódování s x264.
Takže prosím začněte přečtením
<a class="link" href="menc-feat-x264.html#menc-feat-x264-encoding-options-intro" title="7.5.1.1. Úvodem">první části</a>
této příručky.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-intro"></a>7.4.1. Jaké volby by měly být použity, abychom dosáhli nejlepších výsledků?</h3></div></div></div><p>
Začněte prosím pročtením sekce
<code class="systemitem">Xvid</code> v manuálové stránce
<span class="application">MPlayer</span>u.
Tato část má být doplněním man stránky.
</p><p>
Výchozí nastavení Xvid jsou dobrým kompromisem mezi
rychlostí a kvalitou, takže je můžete bez obav použít, pokud
vám nebude něco v dalším textu jasné.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-encoding-options"></a>7.4.2. Volby pro enkódování s <code class="systemitem">Xvid</code></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>vhq</strong></span>
  Tato volba ovlivní rozhodovací algoritmus makrobloku, kde vyšší nastavení
  znamená lepší rozhodování.
  Výchozí nastavení mohou být bezpečně použita pro každé enkódování,
  zatímco vyšší nastavení vždy pomohou PSNR, ale je znatelně pomalejší.
  Poznamenejme, že lepší PSNR nemusí nutně znamenat, že bude obraz vypadat lépe,
  ale udává, že je blíže originálu.
  Vypnutí této volby viditelně zrychlí enkódování; pokud je pro vás
  rychlost kritická, pak to stojí za to.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>bvhq</strong></span>
  Tato volba provádí to samé co vhq, ale v B-snímcích.
  Má zanedbatelný vliv na rychlost a trochu vylepšuje kvalitu
  (kolem +0.1dB PSNR).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>max_bframes</strong></span>
  Větší počet povolených po sobě jdoucích B-snímků obvykle zvyšuje
  komprimovatelnost, ačkoli to může vést k většímu počtu blokových artefaktů.
  Výchozí nastavení je dobrým kompromisem mezi komprimovatelností a
  kvalitou, ale můžete ji zvýšit nad 3, pokud toužíte po nízkém datovém toku.
  Můžete ji rovněž snížit na 1 nebo 0, pokud vám jde o perfektní kvalitu,
  ale v tom případě byste se měli ujistit, že máte nastaven dostatečně
  vysoký datový tok, aby byla jistota, že komrimátor nebude zvyšovat kvantizer,
  aby jej dosáhl.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>bf_threshold</strong></span>
  Tato volba ovládá B-snímkovou citlivost enkodéru, kdy vyšší hodnota
  vede k častějšímu použití B-snímků (a naopak).
  Má být použita spolu s <tt class="option">max_bframes</tt>;
  pokud jste blázen do datového toku, měli byste  zvýšit jak
  <tt class="option">max_bframes</tt>, tak <tt class="option">bf_threshold</tt>,
  nebo naopak můžete zvýšit <tt class="option">max_bframes</tt> a snížit
  <tt class="option">bf_threshold</tt>, takže bude enkodér používat více
  B-snímků pouze na místech, které je <span class="bold"><strong>opravdu</strong></span>
  potřebují.
  Nízká hodnota <tt class="option">max_bframes</tt> a vysoká
  <tt class="option">bf_threshold</tt> asi není nejrozumnější volbou, jelikož přinutí
  enkodér umísťovat B-snímky na místa, které z nich nebudou těžit,
  ale sníží se jejich vizuální kvalita.
  Pokud však potřebujete být kompatibilní s domácími přehrávači, které
  podporují pouze staré DivX profily (ty podporují pouze 1 po sobě jdoucí
  B-snímek), je to vaše jediná cesta ke zvýšení komprimovatelnosti pomocí
  B-snímků.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>trellis</strong></span>
  Optimalizuje proces kvantizace pro dosažení nejlepšího kompromisu
  mezi PSNR a datovým tokem, což umožňuje znatelnou úsporu bitů.
  Ušetřené bity budou využity v jiných částech videa, což zvýší
  celkovou vizuální kvalitu.
  Měli byste ji vždy mít zapnutou, jelikož její kvalitativní přínos je značný.
  Dokonce i když potřebujete vyšší rychlost, nevypínejte ji, dokud jste
  nevypli <tt class="option">vhq</tt> a nezredukovali ostatní volby
  náročné na CPU na minimum.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>hq_ac</strong></span>
  Aktivuje metodu odhadu s menšími náklady na koeficienty, což trochu
  zmenší výstupní soubor (okolo  0,15 až 0,19%, což odpovídá zvýšení PSNR
  o méně než 0.01dB) při zanedbatelném vlivu na rychlost.
  Je proto doporučeno ponechat ji vždy zapnutou.
</p></li><li class="listitem"><p>
 <span class="bold"><strong>cartoon</strong></span>
  Volba navržená pro lepší enkódování kresleného obsahu. Nemá vliv
  na rychlost, pouze doladí heuristiku pro výběr režimu pro tento
  druh obsahu.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>me_quality</strong></span>
  Tato volba ovládá přesnost vyhledávání pohybu.
  Čím vyšší <tt class="option">me_quality</tt>, tím bude
  přesnější odhad původního pohybu a výsledný snímek
  přesněji zachytí originální pohyb.
  </p><p>
  Výchozí nastavení je nejlepší ve všech případech;
  takže ji nedoporučujeme vypínat, pokud nepotřebujete za každou cenu
  zvýšit rychlost, jelikož všechny bity ušetřené dobrým odhadem pohybu
  mohou být použity jinde a zvýšit tak celkovou kvalitu.
  Každopádně nechoďte níž než na 5, a když, tak jen jako poslední možnost.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>chroma_me</strong></span>
  Zlepšuje odhad pohybu tím, že bere v potaz i chroma (barevnou)
  informaci, zatímco samotné <tt class="option">me_quality</tt>
  používá pouze černobílou (luma).
  To spomalí enkódování o 5-10%, ale docela vylepší vizuální kvalitu
  omezením blokových artefaktů a zmenší velikost souboru asi o 1.3%.
  Pokud vám jde hlavně o rychlost, měli byste tuto volbu vypnout dříve,
  než začnete snižovat <tt class="option">me_quality</tt>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>chroma_opt</strong></span>
  Je určena spíše ke zvýšení kvality barev a vyčištění bílých/černých
  okrajů, než k vylepšení koprimovatelnosti.
  To vám může pomoci omezit "red stairs" efekt.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>lumi_mask</strong></span>
  Zkouší přiřadit nižší datový tok částem obrázku, které lidské oko
  dobře nevidí, což umožní enkodéru použít ušetřené bity na
  důležitějších místech obrázku.
  Kvalita výsledku značně závisí na osobních preferencích a
  na typu a nastavení monitoru použitého pro prohlížení
  (typicky to nebude vypadat dobře pokud je jasný, nebo je
  to TFT monitor).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qpel</strong></span>
  Zvýší počet možných vektorů pohybu zvýšením
  přesnosti vyhledávání pohybu z poloviny pixelu na
  čtvrtinu pixelu.
  Ideou je nalezení lepších vektorů pohybu, které naoplátku
  sníží datový tok (což zvýší kvalitu).
  Vektory pohybu s přesností na čtvrt pixelu však vyžadují pro sebe
  pár bitů navíc a výsledné vektory ne vždy dávají (o mnoho) lepší
  výsledky.
  Docela často vydá kodek bity na vyšší přesnost, ale dosáhne jen malého
  nebo žádného zvýšení kvality.
  Naneštěstí není způsob jak zjistit možný zisk <tt class="option">qpel</tt>
  předem, takže musíte enkódovat s a bez ní, abyste měli jistotu.
  </p><p>
  <tt class="option">qpel</tt> může až zdvojnásobit čas enkódování a
  vyžaduje až o 25% více výpočetního výkonu pro dekódování.
  Volba není podporována všemi stolními přehrávači.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>gmc</strong></span>
  Pokouší se ušetřit bity v panoramatických scénách použitím jediného
  vektoru pohybu pro celý snímek.
  To téměř vždy zvýší PSNR, ale znatelně zpomalí enkódování
  (stejně jako dekódování).
  V každém případě byste ji měli používat pouze pokud máte
  <tt class="option">vhq</tt> nastavené na maximum.
  GMC v <code class="systemitem">Xvid</code> je mnohem
  sofistikovanější než v DivX, ale je podporována jen několika
  stolními přehrávači.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-encoding-profiles"></a>7.4.3. Enkódovací profily</h3></div></div></div><p>
Xvid podporuje enkódovací profily pomocí volby <tt class="option">profile</tt>,
což je využíváno pro k zařazení omezení nastavení Xvid videoproudu tak,
aby byl přehratelný na všem, co podporuje vybraný profil.
Omezení se vstahují k rozlišením, datovému toku a různým MPEG-4
vlastnostem.
Následující tabulka ukazuje, co který profil podporuje.
</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col align="center" class="col1"><col align="center" class="col2"><col align="center" class="col3"><col align="center" class="col4"><col align="center" class="col5"><col align="center" class="col6"><col align="center" class="col7"><col align="center" class="col8"><col align="center" class="col9"><col align="center" class="col10"><col align="center" class="col11"><col align="center" class="col12"><col align="center" class="col13"><col align="center" class="col14"><col align="center" class="col15"><col align="center" class="col16"></colgroup><tbody><tr><td align="center"> </td><td colspan="4" align="center">Simple</td><td colspan="6" align="center">Advanced Simple</td><td colspan="6" align="center">DivX</td></tr><tr><td align="center">Název profilu</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">Handheld</td><td align="center">Portable NTSC</td><td align="center">Portable PAL</td><td align="center">Home Theater NTSC</td><td align="center">Home Theater PAL</td><td align="center">HDTV</td></tr><tr><td align="center">Šířka [pixely]</td><td align="center">176</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">176</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">352</td><td align="center">720</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">720</td><td align="center">720</td><td align="center">1280</td></tr><tr><td align="center">Výška [pixely]</td><td align="center">144</td><td align="center">144</td><td align="center">288</td><td align="center">288</td><td align="center">144</td><td align="center">144</td><td align="center">288</td><td align="center">288</td><td align="center">576</td><td align="center">576</td><td align="center">144</td><td align="center">240</td><td align="center">288</td><td align="center">480</td><td align="center">576</td><td align="center">720</td></tr><tr><td align="center">Snímková rychlost [fps]</td><td align="center">15</td><td align="center">15</td><td align="center">15</td><td align="center">15</td><td align="center">30</td><td align="center">30</td><td align="center">15</td><td align="center">30</td><td align="center">30</td><td align="center">30</td><td align="center">15</td><td align="center">30</td><td align="center">25</td><td align="center">30</td><td align="center">25</td><td align="center">30</td></tr><tr><td align="center">Max průměrný datový tok [kbps]</td><td align="center">64</td><td align="center">64</td><td align="center">128</td><td align="center">384</td><td align="center">128</td><td align="center">128</td><td align="center">384</td><td align="center">768</td><td align="center">3000</td><td align="center">8000</td><td align="center">537.6</td><td align="center">4854</td><td align="center">4854</td><td align="center">4854</td><td align="center">4854</td><td align="center">9708.4</td></tr><tr><td align="center">Nejvyšší průměrný datový tok za poslední 3 sekundy [kbps]</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">800</td><td align="center">8000</td><td align="center">8000</td><td align="center">8000</td><td align="center">8000</td><td align="center">16000</td></tr><tr><td align="center">Max. B-snímků</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">2</td></tr><tr><td align="center">MPEG kvantizace</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">Adaptivní kvantizace</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td></tr><tr><td align="center">Enkódování prokládaného</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td></tr><tr><td align="center">Čtvrtpixelová přesnost</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">Globální kompenzace pohybu</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-example-settings"></a>7.4.4. Příklady nastavení enkódování</h3></div></div></div><p>
Následující nastavení jsou příklady nastavení různých kombinací voleb
enkodéru, které ovlivňují poměr rychlost versus kvalita při shodném
cílovém datovém toku.
</p><p>
Veškerá nastavení byla testována na video vzorku 720x448 @30000/1001
snímků za sekundu, cílový datový tok byl 900kbps a prováděly se na
AMD-64 3400+ při 2400 MHz v režimu 64 bitů.
Každá kombinace nastavení má uvedenu změřenou rychlost enkódování
(ve snímcích za sekundu) a ztrátu PSNR (v dB) oproti nastavení
"velmi vysoká kvalita".
Rozumějte však že, v závislosti na vašem zdrojovém materiálu, typu
počítače a pokrokům ve vývoji, můžete dospět k velmi odlišným výsledkům.
</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Popis</th><th>Volby</th><th>Rychlost [fps]</th><th>Relativní ztráta PSNR [dB]</th></tr></thead><tbody><tr><td>Velmi vysoká kvalita</td><td><tt class="option">chroma_opt:vhq=4:bvhq=1:quant_type=mpeg</tt></td><td>16</td><td>0</td></tr><tr><td>Vysoká kvalita</td><td><tt class="option">vhq=2:bvhq=1:chroma_opt:quant_type=mpeg</tt></td><td>18</td><td>-0.1</td></tr><tr><td>Rychlé enkódování</td><td><tt class="option">turbo:vhq=0</tt></td><td>28</td><td>-0.69</td></tr><tr><td>Enkódování v reálném čase</td><td><tt class="option">turbo:nochroma_me:notrellis:max_bframes=0:vhq=0</tt></td><td>38</td><td>-1.48</td></tr></tbody></table></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="menc-feat-enc-libavcodec.html">Předcházející</a> </td><td width="20%" align="center"><a accesskey="u" href="encoding-guide.html">Nahoru</a></td><td width="40%" align="right"> <a accesskey="n" href="menc-feat-x264.html">Další</a></td></tr><tr><td width="40%" align="left" valign="top">7.3. Enkódování s rodinou kodeků <code class="systemitem">libavcodec</code>
 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Domů</a></td><td width="40%" align="right" valign="top"> 7.5. Enkódování
  <code class="systemitem">x264</code> kodekem</td></tr></table></div></body></html>
