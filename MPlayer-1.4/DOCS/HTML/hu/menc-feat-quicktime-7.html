<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>9.7. QuickTime-kompatibilis fájlok készítése a MEncoder használatával</title><link rel="stylesheet" type="text/css" href="default.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="MPlayer - The Movie Player"><link rel="up" href="encoding-guide.html" title="9. fejezet - Kódolás a MEncoderrel"><link rel="prev" href="menc-feat-video-for-windows.html" title="9.6. Kódolás a Video For Windows codec családdal"><link rel="next" href="menc-feat-vcd-dvd.html" title="9.8. A MEncoder használata VCD/SVCD/DVD-kompatibilis fájlok készítéséhez."><link rel="preface" href="howtoread.html" title="Hogyan olvasd ezt a dokumentációt"><link rel="chapter" href="intro.html" title="1. fejezet - Bevezetés"><link rel="chapter" href="install.html" title="2. fejezet - Telepítés"><link rel="chapter" href="usage.html" title="3. fejezet - Használat"><link rel="chapter" href="tv-input.html" title="4. fejezet - TV bemenet"><link rel="chapter" href="tv-teletext.html" title="5. fejezet - Teletext"><link rel="chapter" href="video.html" title="6. fejezet - Videó kimeneti eszközök"><link rel="chapter" href="ports.html" title="7. fejezet - Portok"><link rel="chapter" href="mencoder.html" title="8. fejezet - A MEncoder használatának alapjai"><link rel="chapter" href="encoding-guide.html" title="9. fejezet - Kódolás a MEncoderrel"><link rel="chapter" href="faq.html" title="10. fejezet - Gyakran ismételt kérdések"><link rel="appendix" href="bugreports.html" title="A. függelék - Hogyan jelentsd a hibákat"><link rel="appendix" href="skin.html" title="B. függelék - MPlayer skin formátum"><link rel="subsection" href="menc-feat-quicktime-7.html#menc-feat-quicktime-7-why-use-it" title="9.7.1. Miért akarna bárki is QuickTime-kompatibilis fájlokat készíteni?"><link rel="subsection" href="menc-feat-quicktime-7.html#menc-feat-quicktime-7-constraints" title="9.7.2. QuickTime 7 korlátok"><link rel="subsection" href="menc-feat-quicktime-7.html#menc-feat-quicktime-7-crop" title="9.7.3. Vágás"><link rel="subsection" href="menc-feat-quicktime-7.html#menc-feat-quicktime-7-scale" title="9.7.4. Méretezés"><link rel="subsection" href="menc-feat-quicktime-7.html#menc-feat-quicktime-7-avsync" title="9.7.5. A/V szinkron"><link rel="subsection" href="menc-feat-quicktime-7.html#menc-feat-quicktime-7-bitrate" title="9.7.6. Bitráta"><link rel="subsection" href="menc-feat-quicktime-7.html#menc-feat-quicktime-7-example" title="9.7.7. Kódolási példa"><link rel="subsection" href="menc-feat-quicktime-7.html#menc-feat-quicktime-7-remux" title="9.7.8. Újrakeverés MP4-ként"><link rel="subsection" href="menc-feat-quicktime-7.html#menc-feat-quicktime-7-metadata" title="9.7.9. Metadata tag-ek hozzáadása"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">9.7. <span class="application">QuickTime</span>-kompatibilis fájlok
készítése a <span class="application">MEncoder</span> használatával</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="menc-feat-video-for-windows.html">Vissza</a> </td><th width="60%" align="center">9. fejezet - Kódolás a <span class="application">MEncoder</span>rel</th><td width="20%" align="right"> <a accesskey="n" href="menc-feat-vcd-dvd.html">Előre</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-quicktime-7"></a>9.7. <span class="application">QuickTime</span>-kompatibilis fájlok
készítése a <span class="application">MEncoder</span> használatával</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-why-use-it"></a>9.7.1. Miért akarna bárki is <span class="application">QuickTime</span>-kompatibilis fájlokat készíteni?</h3></div></div></div><p>
  Több oka is van annak, hogy kívánatos lehet
  <span class="application">QuickTime</span>-kompatibilis fájlok készítése.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  Azt szertnéd, hogy minden gép le tudja játszani a kódolásod bármelyik
  fő platformon (Windows, Mac OS X, Unices …).
</p></li><li class="listitem"><p>
  A <span class="application">QuickTime</span> több hardveres és szoftveres
  gyorsítást ki tud használni Mac OS X-en, mint a platform-független
  lejátszók, mint például az <span class="application">MPlayer</span>
  vagy a <span class="application">VLC</span>.
  Ez azt jelenti, hogy a kódolásaid jó eséllyel szebben mennek majd egy
  régi G4-alapú gépen.
</p></li><li class="listitem"><p>
  A <span class="application">QuickTime</span> 7 támogatja a következő
  generációs H.264 codec-et, ami sokkal jobb képminőséget biztosít,
  mint az előző codec generációk (MPEG-2, MPEG-4 …).
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-constraints"></a>9.7.2. <span class="application">QuickTime</span> 7 korlátok</h3></div></div></div><p>
  A <span class="application">QuickTime</span> 7 támogatja a H.264 videót
  és az AAC audiót, de nem támogatja ezek AVI konténer formátumba
  történő keverését. Mindamellett használhatod a
  <span class="application">MEncoder</span>t a videó és az audió kódolásához,
  és utána egy külső programmal, mint pl. az
  <span class="application">mp4creator</span> (az
  <a class="ulink" href="http://mpeg4ip.sourceforge.net/" target="_top">MPEG4IP suite</a> része)
  újrakevered a videó és audió sávokat egy MP4 konténerbe.
</p><p>
  A <span class="application">QuickTime</span> H.264 támogatása korlátolt,
  így néhány fejlett funkció nem lesz elérhető.
  Ha olyan funkciókkal kódolod el a videódat, amiket a
  <span class="application">QuickTime</span> 7 nem támogat, a
  <span class="application">QuickTime</span>-alapú lejátszók egy csodás
  fehér képet fognak mutatni neked a várt videó helyett.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
  <span class="bold"><strong>B-frame-k</strong></span>:
  A <span class="application">QuickTime</span> 7 maximum 1 B-frame-t támogat, pl.
  <tt class="option">-x264encopts bframes=1</tt>. Ez azt jelenti, hogy a
  <tt class="option">b_pyramid</tt>-nek és a <tt class="option">weight_b</tt>-nek nem
  lesz hatása, mivel 1-nél több <tt class="option">bframe</tt> kell nekik.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Makroblokkok</strong></span>:
  A <span class="application">QuickTime</span> 7 nem támogatja a 8x8 DCT makroblokkokat.
  Ez az opció (<tt class="option">8x8dct</tt>) ki van kapcsolva alapértelmezésben,
  ezért győződj meg, hogy még véletlenül sem engedélyezed. Ez azt is jelenti,
  hogy a <tt class="option">i8x8</tt>-nak nem lesz hatása, mivel ahhoz a
  <tt class="option">8x8dct</tt> szükséges.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Méret arány</strong></span>:
  A <span class="application">QuickTime</span> 7 nem támogatja a SAR (sample
  aspect ratio) információkat az MPEG-4 fájlokban; feltételezi, hogy a SAR=1.
  Olvasd el a
  <a class="link" href="menc-feat-quicktime-7.html#menc-feat-quicktime-7-scale" title="9.7.4. Méretezés">méretezés részt</a>
  a tüneti kezeléshez. A <span class="application">QuickTime</span> X-ben már nincs
  meg ez a korlátozás.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-crop"></a>9.7.3. Vágás</h3></div></div></div><p>
  Tegyük fel, hogy rip-pelni szeretnéd a "Narnia krónikái" frissen vásárolt
  másolatát. A DVD-d régió 1-es,
  ami azt jelenti, hogy NTSC. Az alábbi példa működik PAL-ra is,
  feltéve, hogy elhagyod a <tt class="option">-ofps 24000/1001</tt>-et és kicsit más
  <tt class="option">crop</tt> és <tt class="option">scale</tt> méreteket adsz meg.
</p><p>
  Miután lefuttattad az <tt class="option">mplayer dvd://1</tt>-et, kövesd a
  <a class="link" href="menc-feat-telecine.html" title="9.2. Mit kezdjünk a telecine-nel és az átlapolással NTSC DVD-ken">Mit kezdjünk a telecine-nel és az átlapolással
  NTSC DVD-ken</a> részben leírtakat, és rájössz, hogy ez egy
  24000/1001 fps-es progresszív videó. Ez kicsit leegyszerűsíti a folyamatot,
  mivel nem kell inverz telecine szűrőt használnod, mint a
  <tt class="option">pullup</tt> vagy deinterlacing szűrőt, mint a
  <tt class="option">yadif</tt>.
</p><p>
  Ezután le kell vágnod a fekete sávokat a videó tetején és alján,
  ahogy az <a class="link" href="menc-feat-enc-libavcodec.html#menc-feat-dvd-mpeg4-example-crop">ebben</a>
  az előző részben le van írva.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-scale"></a>9.7.4. Méretezés</h3></div></div></div><p>
  A következő lépés szívszaggató.
  A <span class="application">QuickTime</span> 7 nem támogatja azon MPEG-4 videókat,
  melyekben a sample aspect ratio 1-től különböző, így vagy fel kell méretezned
  (ami rengeteg lemezterületet elvisz) vagy le kell méretezned (ami miatt elveszik
  a forrás pár részlete) a videót négyzetes pixelekre.
  Bárhogy is csinálod, ez nagyon nem jó, de nem kerülheted ki, ha
  <span class="application">QuickTime</span> 7 által lejátszható videót akarsz.
  A <span class="application">MEncoder</span> végre tudja hajtani a megfelelő fel-
  illetve leméretezést megfelelően a <tt class="option">-vf scale=-10:-1</tt> vagy
  a <tt class="option">-vf scale=-1:-10</tt> megadásával.
  Ez a videódat a vágott magasságnak megfelelő szélességűre méretezi,
  16 legközelebbi többszörösére kerekítve az optimális tömörítéshez.
  Emlékezz rá, hogy ha vágsz, először vágnod kell, utána méretezni:

  </p><pre class="screen">-vf crop=720:352:0:62,scale=-10:-1</pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-avsync"></a>9.7.5. A/V szinkron</h3></div></div></div><p>
  Mivel egy másik konténerbe keversz, mindig ajánlott a <tt class="option">harddup</tt>
  opció használata annak biztosítására, hogy a duplikált kockák a kimeneti
  videóban is duplikálva lesznek. Ezen opció nélkül a
  <span class="application">MEncoder</span> egyszerűen csak egy jelet tesz a videó
  folyamba a képkocka duplikálásának helyére és innentől a kliens szoftveren
  műlik, hogy kétszer mutatja-e az adott kockát. Sajnos ez a "szoft duplikálás"
  nem éli túl az újrakeverést, így az audió lassan elveszíti a szinkront a videóval.
</p><p>
  A végleges szűrőlánc így néz ki:
  </p><pre class="screen">-vf crop=720:352:0:62,scale=-10:-1,harddup</pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-bitrate"></a>9.7.6. Bitráta</h3></div></div></div><p>
  Mint mindig, a bitráta megválasztása a forrás technikai tulajdonságaitól függ,
  ahogy az
  <a class="link" href="menc-feat-dvd-mpeg4.html#menc-feat-dvd-mpeg4-resolution-bitrate" title="9.1.5. Felbontás és bitráta kiválasztása">itt</a> le van írva,
  valamint az egyéni ízlésedttől is.
  Ebben a filmben sok akció van nagy részletességgel, de a H.264 videó sokkal
  kisebb bitrátán is jobban néz ki, mint az XviD vagy más MPEG-4 codec-ek.
  Hosszas kísérletezés után ezen leírás szerzője úgy döntött, hogy 900kbps-en
  kódolja el ezt a filmet és úgy hiszi, hogy nagyon jól néz ki.
  Csökkentheted a bitrátát, ha több helyet kell megspórolnod vagy növelheted,
  ha javítanod kell a minőséget.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-example"></a>9.7.7. Kódolási példa</h3></div></div></div><p>
  Készen állsz a videó elkódolására. Mivel érdekel a minőség, természetesen
  két-lépéses kódolást futtatsz le. Hogy megspóroljunk némi kódolási időt,
  megadhatod a <tt class="option">turbo</tt> opciót az első lépésben; ez lecsökkenti
  a <tt class="option">subq</tt>-t és a <tt class="option">frameref</tt>-et 1-re. Némi
  lemezterület megspórolása érdekében használhatod az
  <tt class="option">ss</tt> opciót a videó első pár másodpercének levágásához.
  (Úgy tűnik, hogy a konkrét film 32 másodpercnyi stáblistát és logót
  tartalmaz.)  A <tt class="option">bframes</tt> lehet 0 vagy 1.
  A többi opció a <a class="link" href="menc-feat-x264.html#menc-feat-x264-encoding-options-speedvquality" title="9.5.1.2. Elsősorban a sebességet és a minőséget érintő opciók">Kódolás az
  <code class="systemitem">x264</code> codec-kel</a> részben
  és a man oldalon van leírva.

  </p><pre class="screen">mencoder dvd://1 -o /dev/null -ss 32 -ovc x264 \
-x264encopts pass=1:turbo:bitrate=900:bframes=1:\
me=umh:partitions=all:trellis=1:qp_step=4:qcomp=0.7:direct_pred=auto:keyint=300 \
-vf crop=720:352:0:62,scale=-10:-1,harddup \
-oac faac -faacopts br=192:mpeg=4:object=2 -channels 2 -srate 48000 \
-ofps 24000/1001</pre><p>

  Ha több processzoros géped van, ne hagy ki a kódolás drasztikus módon történő
  gyorsításának a lehetőségét, melyet az
  <a class="link" href="menc-feat-x264.html#menc-feat-x264-encoding-options-speedvquality-threads">
  <code class="systemitem">x264</code> több-processzoros módja</a>
  nyújt a <tt class="option">threads=auto</tt> <tt class="option">x264encopts</tt>-ban
  történő megadásával a parancssorban.
</p><p>
  A második lépés ugyan ez, kivéve, hogy meg kell adni a kimeneti fájlt és
  a <tt class="option">pass=2</tt>-őt.

  </p><pre class="screen">mencoder dvd://1 <span class="bold"><strong>-o narnia.avi</strong></span> -ss 32 -ovc x264 \
-x264encopts <span class="bold"><strong>pass=2</strong></span>:turbo:bitrate=900:frameref=5:bframes=1:\
me=umh:partitions=all:trellis=1:qp_step=4:qcomp=0.7:direct_pred=auto:keyint=300 \
-vf crop=720:352:0:62,scale=-10:-1,harddup \
-oac faac -faacopts br=192:mpeg=4:object=2 -channels 2 -srate 48000 \
-ofps 24000/1001</pre><p>
</p><p>
  Az eredmény AVI tökéletesen lejátszható az
  <span class="application">MPlayer</span>-rel, de természetesen a
  <span class="application">QuickTime</span> nem játsza le, mivel nem támogatja
  az AVI-ba kevert H.264-et.
  Ezért a következő lépés a videó MP4 konténerbe történő keverése.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-remux"></a>9.7.8. Újrakeverés MP4-ként</h3></div></div></div><p>
  Több mód is van az AVI MP4-be történő újrakeverésére. Használhatod az
  <span class="application">mp4creator</span>-t, ami az
  <a class="ulink" href="http://mpeg4ip.sourceforge.net/" target="_top">MPEG4IP suite</a> része.
</p><p>
  Először az AVI-ból különálló audió és videó folyamokat kell készíteni az
  <span class="application">MPlayer</span>rel.

  </p><pre class="screen">mplayer narnia.avi -dumpaudio -dumpfile narnia.aac
mplayer narnia.avi -dumpvideo -dumpfile narnia.h264</pre><p>

  A fájl nevek fontosak; az <span class="application">mp4creator</span>
  <code class="systemitem">.aac</code> kiterjesztésű AAC audió folyamot és
  <code class="systemitem">.h264</code> kiterjesztésű H.264 videó folyamot vár.
</p><p>
  Ezután használd az <span class="application">mp4creator</span>-t egy új MP4
  fájl létrehozásához az audió és videó folyamból.

  </p><pre class="screen">mp4creator -create=narnia.aac narnia.mp4
mp4creator -create=narnia.h264 -rate=23.976 narnia.mp4</pre><p>

  A kódolási lépéstől eltérően itt a framerátát decimálisként
  (23.976) kell megadni, nem törtként (24000/1001).
</p><p>
  Ennek a <code class="systemitem">narnia.mp4</code> fájlnak már bármilyen
  <span class="application">QuickTime</span> 7 alkalmazással lejátszhatónak kell
  lennie, mint például a <span class="application">QuickTime Player</span> vagy
  az <span class="application">iTunes</span>. Ha a videót böngészőben szeretnéd
  megnézni a <span class="application">QuickTime</span> plugin-nel, utasítanod kell
  a <span class="application">QuickTime</span> plugin-t, hogy kezdje meg a lejátszást,
  miközben még tart a letöltés. Az <span class="application">mp4creator</span>
  bele tudja tenni a videóba az ehhez szükséges utasító sávokat:

  </p><pre class="screen">mp4creator -hint=1 narnia.mp4
mp4creator -hint=2 narnia.mp4
mp4creator -optimize narnia.mp4</pre><p>

  Ellenőrizheted a végső eredményt, hogy meggyőződj róla, hogy az utasító
  sávok rendben elkészültek:

  </p><pre class="screen">mp4creator -list narnia.mp4</pre><p>

  Látnod kell a sávok listáját: 1 audió, 1 videó és 2 hint sáv.

</p><pre class="screen">Track   Type    Info
1       audio   MPEG-4 AAC LC, 8548.714 secs, 190 kbps, 48000 Hz
2       video   H264 Main@5.1, 8549.132 secs, 899 kbps, 848x352 @ 23.976001 fps
3       hint    Payload mpeg4-generic for track 1
4       hint    Payload H264 for track 2
</pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-metadata"></a>9.7.9. Metadata tag-ek hozzáadása</h3></div></div></div><p>
  Ha tag-eket akarsz hozzáfűzni a videódhoz, amiket az iTunes megjelnít, használhatod az
  <a class="ulink" href="http://atomicparsley.sourceforge.net/" target="_top">AtomicParsley</a>-t.

  </p><pre class="screen">AtomicParsley narnia.mp4 --metaEnema --title "The Chronicles of Narnia" --year 2005 --stik Movie --freefree --overWrite</pre><p>

  A <tt class="option">--metaEnema</tt> opció eltávolít minden meglévő metadata-t
  (<span class="application">mp4creator</span> beszúrja a saját nevét az
  "encoding tool" tag-be), a <tt class="option">--freefree</tt> pedig visszaszerzi
  a törölt metadata által elfoglalt helyet.
  A <tt class="option">--stik</tt> opció beállítja a videó típusát (mint pl. Movie
  vagy TV Show), aminek a segítségével az iTunes csoportosítani tudja a fájlokat.
  A <tt class="option">--overWrite</tt> opció felülírja az eredeti fájlt;
  ennélkül az <span class="application">AtomicParsley</span> egy új, automatikusan
  elnevezett fájlt hoz létre ugyan abban a könyvtárban és érintetlenül hagyja
  az eredeti fájlt.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="menc-feat-video-for-windows.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="encoding-guide.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="menc-feat-vcd-dvd.html">Előre</a></td></tr><tr><td width="40%" align="left" valign="top">9.6. 
  Kódolás a <code class="systemitem">Video For Windows</code>
  codec családdal
 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Főoldal</a></td><td width="40%" align="right" valign="top"> 9.8. A <span class="application">MEncoder</span>
  használata VCD/SVCD/DVD-kompatibilis fájlok készítéséhez.</td></tr></table></div></body></html>
